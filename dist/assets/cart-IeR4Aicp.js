import"./style-Bj0xmOQp.js";import{t as y,q as S}from"./TotalQuantity-jfQrvFG7.js";import{G as a}from"./localstoragedata-CAic1If1.js";import{g as q}from"./GetApi-D0E96TSk.js";const d=()=>{const e=document.querySelector("#count");let t=0;a().forEach(r=>{t+=r.quantity}),e.textContent=t},u=()=>{let e=a(),t=0;e.forEach(r=>{t+=r.Productprice*r.quantity});let o=0;t>999&&(o=t*.1),document.querySelector(".total-product-cost p").innerText=`Total: ${t}`,document.querySelector(".total-disc p").textContent=`Discount: ${o.toFixed(2)}`,document.querySelector(".delivery-charges .d-c").textContent="Delivery:",document.querySelector(".delivery-charges .d-p").textContent="Free",document.querySelector(".total-amount-to-paid p").textContent=`Estimate Total: ${t-o}`},p=e=>{let t=a();t.forEach(r=>{r.id==e&&(r.quantity+=1)}),localStorage.setItem("cart",JSON.stringify(t));let o=document.querySelector(`#c${e} .quantity`);o&&(o.value=parseInt(o.value)+1),d(),u()},s=e=>{let t=a();t=t.filter(r=>r.id!==e),localStorage.setItem("cart",JSON.stringify(t));const o=document.querySelector(`#c${e}`);o&&o.remove(),d(),u()},i=(e,t)=>{let o=a(),r=o.findIndex(n=>n.id===e);if(r===-1){console.error(`Product With ${e} is not found in LocalStorage`);return}if(t=o[r].quantity-1,t<=0){s(e);return}else{o[r].quantity=t,localStorage.setItem("cart",JSON.stringify(o));let n=document.querySelector(`#c${e} .quantity`);n&&(n.value=t)}d(),u();let l=document.querySelector(`#c${e} .decrement`);l&&(i.bind(null,e),i.removeEventListener("click",i),l.addEventListener("click",()=>i(e,t)))};let f=a();const g=document.querySelector("#ProductTemplate"),v=document.querySelector("#ProductsContainer"),x=async()=>{const e=await q();f.forEach(t=>{let{id:o,Productprice:r,quantity:l}=t;if(l!=0){let n=e.findIndex(m=>m.id===o);const c=document.importNode(g.content,!0);c.querySelector(".cart-box").id=`c${o}`,c.querySelector(".cart-item-img img").src=e[n].image[0],c.querySelector(".name").innerText=e[n].name,c.querySelector(".price").innerText=`â‚¹${r}`,c.querySelector(".quantity").value=l,c.querySelector(".increment").addEventListener("click",()=>p(o)),c.querySelector(".decrement").addEventListener("click",()=>i(o,l)),c.querySelector(".remove").addEventListener("click",()=>s(o)),v.append(c)}}),u()},h=a(),C=()=>{let e=0;return h.forEach(t=>{e+=t.quantity}),e},E=C();E==0&&(document.querySelector(".container").style.display="none",document.querySelector(".ContinueButton").style.display="none",document.querySelector(".heading h1").innerText="Cart is empty");x();y();S();
